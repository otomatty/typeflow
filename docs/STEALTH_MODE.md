# ステルスモード（ミニマルモード）ガイド

仕事中でもバレずにタイピング練習ができる「ステルスモード」機能のドキュメントです。

## 概要

ステルスモード（ミニマルモード）は、タイピングゲームをシンプルなテキストエディタ風のUIで表示する機能です。派手なアニメーションやゲーム風の要素を排除し、仕事中でも目立たずにタイピング練習ができるように設計されています。

## 機能

### 基本機能

- **シンプルなUI**: テキストエディタ/コードエディタ風のミニマルな表示
- **タイムゲージなし**: 目立つプログレスバーを非表示
- **控えめな統計表示**: KPS/正確率を最小限のサイズで表示
- **アニメーション削減**: フェードイン/アウトなどの派手なアニメーションを削除

### 自動切り替え

画面サイズに基づいて自動的にミニマルモードに切り替える機能があります。

- **オフ**: 常に通常モード
- **自動**: 画面幅が設定値以下になったら自動切り替え（デフォルト: 600px）
- **常にオン**: 常にミニマルモードで表示

## 設定方法

1. 設定画面（歯車アイコン）を開く
2. 「ミニマルモード」セクションを見つける
3. お好みのモードを選択:
   - **オフ**: 通常のゲーム画面
   - **自動**: ウィンドウを小さくすると自動的にミニマルモードに切り替わる
   - **常にオン**: 常にミニマルな表示

## 仕事中にバレないためのヒント

### 🖥️ ウィンドウ管理

1. **小さなウィンドウで練習**
   - ブラウザウィンドウを小さくして画面の隅に配置
   - ミニマルモードを「自動」に設定しておくと、小さいウィンドウで自動的にシンプルなUIに切り替わる

2. **ピクチャー・イン・ピクチャー風配置**
   - 画面の右下や左下に小さく配置
   - 他のウィンドウの邪魔にならない位置に

3. **マルチディスプレイ活用**
   - サブモニターで練習
   - 仕事用のモニターとは別のディスプレイに配置

### ⌨️ キーボードショートカット

- **Esc**: ゲームを即座に終了（素早く隠すときに便利）
- **Cmd/Ctrl + W**: ブラウザタブを閉じる（緊急時）

### 🎨 ブラウザ設定

1. **ダークモード推奨**
   - コードエディタやターミナルに見えやすい
   - 目立ちにくい

2. **タブのタイトルを確認**
   - ブックマークに登録するときに「仕事用メモ」などに変更可能

### 📱 追加のアイデア

1. **ブラウザの分離**
   - 別のブラウザプロファイルで開く
   - 仕事用ブックマークバーに混ぜない

2. **休憩時間を活用**
   - 昼休みや小休憩のタイミングで練習
   - ポモドーロテクニックの休憩時間に

3. **スタンバイ状態を用意**
   - 練習前にメニュー画面を開いておく
   - 開始は「Enter」キー一つで

## 🥷 CLIモード（ターミナル練習）

**最強のステルスモード** - ターミナルで直接タイピング練習ができます。一見するとログ出力やテスト実行に見えるため、開発者にとって最も自然な偽装が可能です。

### 基本的な使い方

```bash
# CLI練習を開始（サーバー不要！）
bun run cli:practice
```

**注意**: ローカルDB（`local.db`）を直接使用するため、サーバー起動は不要です。Web版と同じデータを共有します。

### 偽装モード

5種類の表示モードで、様々な開発作業に偽装できます：

#### 1. Minimal（デフォルト）- シンプル表示

```bash
bun run cli:practice
# または
bun run cli:practice --mode=minimal
```

```
taipingu: taip█ [3.2s]
```

#### 2. Log - ログ出力風

```bash
bun run cli:practice:log
```

```
[2025-12-25 10:30:15] Processing: taipingu [####......] 3.2s
[2025-12-25 10:30:18] OK: taipingu (1.2s, 0 miss)
```

#### 3. Test - テスト実行風

```bash
bun run cli:practice:test
```

```
✓ pass: たいぴんぐ → taipingu (1.2s)
✗ fail: ぷろぐらむ → purogura... (timeout 5.0s)
○ run:  こーど → ko█ [##....] 2.1s

Tests: 2 passed, 1 failed, 1 running
```

#### 4. Build - ビルドログ風

```bash
bun run cli:practice:build
```

```
Compiling word 3/50: たいぴんぐ
  → Transpiling: taipingu [████░░░░] 60%
  → Input: taipi█
  → Elapsed: 1.8s / 4.5s
```

#### 5. Git - git操作風

```bash
bun run cli:practice:git
```

```
$ git commit -m "taipingu"
hint: Waiting for message...
> taip█
[####......] 2.1s remaining
```

### オプション

```bash
# 単語数を指定
bun run cli:practice --count=10

# 全単語で練習
bun run cli:practice --count=all

# スコアを保存しない
bun run cli:practice --no-save

# 複数オプション
bun run cli:practice --mode=log --count=15
```

### キー操作

| キー      | 動作                     |
| --------- | ------------------------ |
| a-z, 0-9  | 文字入力                 |
| Backspace | 1文字削除                |
| Escape    | 即座に終了（スコア保存） |
| Ctrl+C    | 強制終了（スコア未保存） |

### 特徴

- ✅ **通常ゲームと同じデータを使用** - 単語、設定、スコアすべて共有
- ✅ **同じ時間計算ロジック** - 適応型制限時間、ミスペナルティ
- ✅ **スコア記録** - Web版と統合されたスコア履歴
- ✅ **音なし** - ターミナルなので完全サイレント
- ✅ **即終了** - Escキーで瞬時に終了

### 仕事中のヒント

1. **tmux/screenと併用**: 別のペインで練習、素早く切り替え
2. **ビルド待ち時間**: コンパイル中に `--mode=build` で自然に
3. **テスト実行中に偽装**: `--mode=test` でテストが走っているように見せる
4. **VSCodeターミナル**: 統合ターミナルで実行すれば完璧

---

## 将来の拡張アイデア

### 実装検討中の機能

1. **偽装モード** ✅ **CLIモードで実装済み**
   - ~~コードエディタそっくりの表示（行番号、シンタックスハイライト風）~~
   - ターミナルエミュレータ風のUI ✅
   - Slackやメモ帳に見える表示

2. **パニックボタン**
   - 特定のキー（例: F12）で瞬時にダミー画面に切り替え
   - 「技術ドキュメント」風のダミーページを表示

3. **音声OFF保証**
   - 効果音が鳴らないモード
   - キー入力音も抑制

4. **セッション自動保存**
   - 緊急終了しても進捗が保存される
   - 後で続きから再開可能

5. **タブタイトル変更**
   - 「Draft Document」「Notes」などに変更
   - ファビコンもシンプルなものに

6. **完全キーボード操作**
   - マウスを使わずにすべての操作が可能
   - クリック音を避けられる

### コントリビューション歓迎

上記のアイデアの実装にご興味があれば、ぜひプルリクエストをお送りください！

## 技術的詳細

### 関連ファイル

#### Webミニマルモード

- `src/components/MinimalTypingDisplay.tsx`: ミニマル表示用タイピングコンポーネント
- `src/components/MinimalGameScreen.tsx`: ミニマルモードのゲーム画面
- `src/components/MinimalGameOverScreen.tsx`: ミニマルモードの結果画面
- `src/hooks/useMinimalMode.ts`: ミニマルモードの状態管理フック
- `src/components/settings/MinimalModeSetting.tsx`: 設定画面のコンポーネント

#### CLIモード

- `scripts/cli-practice.ts`: CLIエントリポイント
- `scripts/cli/types.ts`: 型定義
- `scripts/cli/game-engine.ts`: ゲームロジック（useGameのCLI版）
- `scripts/cli/display.ts`: 表示処理（偽装モード含む）
- `scripts/cli/input.ts`: キー入力処理
- `scripts/cli/api.ts`: APIサーバーとの通信

### 設定値

```typescript
// デフォルト設定
minimalMode: 'auto' // 'off' | 'auto' | 'always'
minimalModeBreakpoint: 600 // ピクセル値（autoモード用）
```

## FAQ

### Q: ミニマルモードでもスコアは記録されますか？

A: はい、通常モードと同様にスコアは記録されます。

### Q: スマートフォンでも使えますか？

A: 画面サイズが小さいデバイスでは自動的にミニマルモードになりますが、タイピング練習はPCでの使用を想定しています。

### Q: 上司にバレたらどうなりますか？

A: 当アプリは責任を負いかねます 😅 自己責任でご利用ください。

---

_Happy Stealth Typing! 🥷_
