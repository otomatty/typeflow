# TypeFlow API - Cloudflare Workers設定
# 
# ⚠️ 重要: このファイルはバックエンド（Workers）専用の設定です
# フロントエンドはCloudflare Pagesでデプロイされます（wrangler.tomlは使用しません）
# 
# デプロイ先:
# - バックエンド: Cloudflare Workers（このファイルで設定）
#   - Worker名: typeflow-api
#   - エントリーポイント: src/server/index.ts
# - フロントエンド: Cloudflare Pages（GitHub Actionsで自動デプロイ）
#   - プロジェクト名: typeflow
#   - ビルド出力: dist/
# - データベース: Turso（クラウド）またはローカルSQLiteファイル
# 
# 詳細は docs/TURSO_SETUP.md を参照してください。

name = "typeflow"
main = "src/server/index.ts"
compatibility_date = "2024-11-06"
dev = { port = 3456 }

# 本番環境の環境変数設定
# 環境変数はCloudflare Dashboardで設定してください
# Cloudflare Dashboard → Workers & Pages → typeflow-api → Settings → Variables
# 必要な環境変数:
# - TURSO_DATABASE_URL
# - TURSO_AUTH_TOKEN
# - CLERK_SECRET_KEY
# - ALLOWED_ORIGINS (オプション)
# 
# 重要: [env.production]セクションを削除することで、
# Cloudflare Dashboardで設定した環境変数が使用されます。
# [env.production]セクションが存在すると、Wranglerが環境変数を上書きする可能性があります。

# 開発環境の環境変数設定
[env.development.vars]
# TURSO_DATABASE_URL = "libsql://your-database.turso.io"
# TURSO_AUTH_TOKEN = "your-auth-token"
# ALLOWED_ORIGINS = "http://localhost:5173,http://localhost:3000"

